{% set path_v = exist_v != true ? path('delete_visited' , {'id' : eta.id}) : path('ajouter_visited' , {'id' : eta.id}) %}
{% set state_v = exist_v != true ? 'Deja visité' : 'Marquer visité' %}

{% set path_wish = exist_w != true ? path('delete_wish' , {'id' : eta.id}) : path('ajouter_wish' , {'id' : eta.id}) %}
{% set state_wish = exist_w != true ? 'Wished' : 'Marquer wish' %}



{% extends 'Base.html.twig' %}

{% block AfficherEtablissementUser %}
    <section id="reservation" class="reservation_section bg-grey">
        <div class="container padding">
            <div class="col-sm-10 col-sm-offset-1 align-left">
                <div class="reserv_form">
                    <div class="section_heading mb-40">
                        <div class="fos_user_user_show">
                            <div>
                                <p><strong>Nom:</strong> {{ (eta.nom) }}</p>
                            </div>
                            <div>
                                <p><strong>Adresse:</strong> {{ (eta.adresse) }}</p>
                            </div>
                            <div>
                                <p><strong>Description:</strong> {{ (eta.description) }}</p>
                            </div>
                            <div>

                                <a href="{{ path_v }}" class="default_btn" id="js-visited">{{ state_v }}</a>
                                <a href="{{ path_wish }}" class="default_btn" id="js-wished">{{ state_wish }}</a>

                            </div>
                            <br>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block javascript %}
    <script src="{{ asset('script.js') }}"></script>
    <script>

        {#$(document).ready(function () {#}

        {#$('#js-visited').on('click', function (ev) {#}
        {#ev.preventDefault();#}
        {#ev.stopPropagation();#}

        {#$id = $(this).attr('data-url');#}
        {#$item = $(this);#}
        {#$content = $item.attr('data-content');#}

        {#$data = {'id' : $id };#}

        {#if ($content !== false) {#}
        {#$.ajax({#}
        {#method: "GET",#}
        {#url: '{{ path('ajax_visited') }}',#}
        {#data: $data#}
        {#}).done(function (response) {#}
        {#console.log("Add");#}
        {#setContent(true);#}
        {#$item.text("Deja Visite");#}
        {#}).fail(function (error) {#}

        {#});#}

        {#} else {#}
        {#$.ajax({#}
        {#method: "GET",#}
        {#url: '{{ path('ajax_visited_delete') }}',#}
        {#data: $data#}
        {#}).done(function (response) {#}
        {#console.log("Delete");#}
        {#setContent(false);#}
        {#$item.text("Marquer Visite");#}
        {#}).fail(function (error) {#}

        {#});#}
        {#}#}
        {#});#}

        {#function setContent(isVisited) {#}
        {#$('#js-visited').attr('data-content', isVisited);#}
        {#}#}

        {#function changeContent(str) {#}
        {#$('#js-visited').text(str);#}
        {#}#}
        //        });
    </script>
{% endblock %}